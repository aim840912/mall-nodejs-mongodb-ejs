<%- include('../includes/header.ejs')%>

<h1>我的產品</h1>
<% if(prods.length>0){ %>
<div class="row">
    <%  for (let product of prods){ %>


    <div class="col-md-4 p-2">
        <div class="card" style="width: 18rem;">
            <img src="/<%= product.imageUrl %>" class="card-img-top" alt="<%= product.title %>">
            <div class="card-body">
                <h5 class="card-title"><%= product.title %></h5>
                <p class="card-text"><%= product.description %></p>
                <p>￥<%= product.price %></p>
                <div class="row">
                    <a href="/product-detail/<%= product._id %>" class="btn btn-secondary mr-2">產品詳情</a>

                    <%- include('../includes/add-to-cart.ejs',{product}) %>
                </div>
            </div>
        </div>

    </div>
    <% } %>
</div>

<div class="pt-4">
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <% if(currentPage !==1){%>
            <li class="page-item"><a class="page-link" href="?page=1">首頁</a></li>
            <%}%>


            <% if(hasPrevPage){%>
            <li class="page-item"><a class="page-link" href="?page=<%= prevPage %>">上一頁</a></li>
            <%}%>

            <% for(let i=1; i<= totalPages;i++){%>
            <li class="page-item <% if(i==currentPage){ %>active<%}%>"><a class="page-link" href="?page=<%= i %>"><%= i %></a></li>
            <%}%>

            <% if(hasNextPage){%>
            <li class="page-item"><a class="page-link" href="?page=<%= nextPage %>">下一頁</a></li>
            <%}%>


            <% if(totalPages !== currentPage){%>
            <li class="page-item"><a class="page-link" href="?page=<%= totalPages %>">尾頁</a></li>
            <%}%>
        </ul>
    </nav>
</div>

<% } else {%>
<div class="alert alert-danger" role="alert">暫無產品</div>
<% }%>

<%- include('../includes/footer.ejs')%>